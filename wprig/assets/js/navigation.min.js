"use strict";var KEYMAP={TAB:9};function initNavigation(){initNavToggleSubmenus(),initNavToggleSmall()}function initNavToggleSubmenus(){var e=document.querySelectorAll(".nav--toggle-sub");if(e.length)for(var t=0;t<e.length;t++)initEachNavToggleSubmenu(e[t])}function initEachNavToggleSubmenu(e){var t=e.querySelectorAll(".menu ul");if(t.length)for(var n=getDropdownButton(),a=0;a<t.length;a++){var o=t[a].parentNode,l=o.querySelector(".dropdown");if(!l){(l=document.createElement("span")).classList.add("dropdown");var r=document.createElement("i");r.classList.add("dropdown-symbol"),l.appendChild(r),t[a].parentNode.insertBefore(l,t[a])}var i=n.cloneNode(!0);i.innerHTML=l.innerHTML,l.parentNode.replaceChild(i,l),i.addEventListener("click",function(e){toggleSubMenu(e.target.parentNode)}),o.addEventListener("mouseleave",function(e){toggleSubMenu(e.target,!1)}),o.querySelector("a").addEventListener("focus",function(e){for(var t=e.target.parentNode.parentNode.querySelectorAll("li.menu-item--toggled-on"),n=0;n<t.length;n++)toggleSubMenu(t[n],!1)}),t[a].addEventListener("keydown",function(e){var t="ul.toggle-show > li > a, ul.toggle-show > li > button";KEYMAP.TAB===e.keyCode&&(e.shiftKey?isfirstFocusableElement(e.target,document.activeElement,t)&&toggleSubMenu(e.target.parentNode,!1):islastFocusableElement(e.target,document.activeElement,t)&&toggleSubMenu(e.target.parentNode,!1))}),t[a].parentNode.classList.add("menu-item--has-toggle")}}function initNavToggleSmall(){var e=document.querySelectorAll(".nav--toggle-small");if(e.length)for(var t=0;t<e.length;t++)initEachNavToggleSmall(e[t])}function initEachNavToggleSmall(t){var e=t.querySelector(".menu-toggle");e&&(e.setAttribute("aria-expanded","false"),e.addEventListener("click",function(e){t.classList.toggle("nav--toggled-on"),e.target.setAttribute("aria-expanded","false"===e.target.getAttribute("aria-expanded")?"true":"false")},!1))}function toggleSubMenu(e,t){var n=e.querySelector(".dropdown-toggle"),a=e.querySelector("ul"),o=e.classList.contains("menu-item--toggled-on");if(void 0!==t&&"boolean"==typeof t&&(o=!t),n.setAttribute("aria-expanded",(!o).toString()),o){e.classList.remove("menu-item--toggled-on"),a.classList.remove("toggle-show"),n.setAttribute("aria-label",wpRigScreenReaderText.expand);for(var l=e.querySelectorAll(".menu-item--toggled-on"),r=0;r<l.length;r++)toggleSubMenu(l[r],!1)}else{for(var i=e.parentNode.querySelectorAll("li.menu-item--toggled-on"),g=0;g<i.length;g++)toggleSubMenu(i[g],!1);e.classList.add("menu-item--toggled-on"),a.classList.add("toggle-show"),n.setAttribute("aria-label",wpRigScreenReaderText.collapse)}}function getDropdownButton(){var e=document.createElement("button");return e.classList.add("dropdown-toggle"),e.setAttribute("aria-expanded","false"),e.setAttribute("aria-label",wpRigScreenReaderText.expand),e}function isfirstFocusableElement(e,t,n){var a=e.querySelectorAll(n);return 0<a.length&&t===a[0]}function islastFocusableElement(e,t,n){var a=e.querySelectorAll(n);return 0<a.length&&t===a[a.length-1]}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initNavigation):initNavigation();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5hdmlnYXRpb24uanMiXSwibmFtZXMiOlsiS0VZTUFQIiwiVEFCIiwiaW5pdE5hdmlnYXRpb24iLCJpbml0TmF2VG9nZ2xlU3VibWVudXMiLCJpbml0TmF2VG9nZ2xlU21hbGwiLCJuYXZUT0dHTEUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpIiwibGVuZ3RoIiwiaW5pdEVhY2hOYXZUb2dnbGVTdWJtZW51IiwibmF2IiwiU1VCTUVOVVMiLCJkcm9wZG93bkJ1dHRvbiIsImdldERyb3Bkb3duQnV0dG9uIiwicGFyZW50TWVudUl0ZW0iLCJwYXJlbnROb2RlIiwiZHJvcGRvd24iLCJjcmVhdGVFbGVtZW50IiwiZHJvcGRvd25TeW1ib2wiLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmRDaGlsZCIsImluc2VydEJlZm9yZSIsInRoaXNEcm9wZG93bkJ1dHRvbiIsImNsb25lTm9kZSIsInJlcGxhY2VDaGlsZCIsInRvZ2dsZVN1Yk1lbnUiLCJ0YXJnZXQiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInBhcmVudE1lbnVJdGVtc1RvZ2dsZWQiLCJxdWVyeVNlbGVjdG9yIiwiaiIsImtleUNvZGUiLCJzaGlmdEtleSIsImlzZmlyc3RGb2N1c2FibGVFbGVtZW50IiwiYWN0aXZlRWxlbWVudCIsImZvY3VzU2VsZWN0b3IiLCJpc2xhc3RGb2N1c2FibGVFbGVtZW50IiwiaW5pdEVhY2hOYXZUb2dnbGVTbWFsbCIsIm1lbnVUT0dHTEUiLCJzZXRBdHRyaWJ1dGUiLCJ0b2dnbGUiLCJnZXRBdHRyaWJ1dGUiLCJmb3JjZVRvZ2dsZSIsInRvZ2dsZUJ1dHRvbiIsInN1Yk1lbnUiLCJwYXJlbnRNZW51SXRlbVRvZ2dsZWQiLCJ1bmRlZmluZWQiLCJ0b1N0cmluZyIsInN1Yk1lbnVJdGVtc1RvZ2dsZWQiLCJyZW1vdmUiLCJ3cFJpZ1NjcmVlblJlYWRlclRleHQiLCJleHBhbmQiLCJjb2xsYXBzZSIsImNvbnRhaW5lciIsImVsZW1lbnQiLCJmb2N1c2FibGVF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QUFBLHlCQUNETCxFQUFNM0IsVUFBQWdDLE9BQUEsZUFDTk4sRUFBQUosYUFBQSxhQUFBVyxzQkFBQUMsUUFHQzNCLElBREQsSUFBQXdCLEVBQXFCcEIsRUFBQUEsaUJBQXFDLDBCQUN6REosRUFBQUEsRUFBYW5CLEVBQUV1QixFQUF3QnZCLE9BQUtBLElBQzVDbUIsY0FFRHdCLEVBQUEzQyxJQUFBLE9BUE0sQ0FVTnNDLElBREFDLElBQUFBLEVBQXVCaEMsRUFBdkJDLFdBQUFULGlCQUFBLDRCQUNBdUMsRUFBWSxFQUFDSixFQUFBQSxFQUE0QlcsT0FBQUEsSUFDekMxQixjQUFBSSxFQUFBdkIsSUFBQSxHQUhBTyxFQUFlSyxVQUFVQyxJQUFLLHlCQUM5QjBCLEVBQVEzQixVQUFVQyxJQUFLLGVBQ3ZCeUIsRUFBYUosYUFBYyxhQUFjVyxzQkFBc0JFLFdBZWhFLFNBQUF6QyxvQkFFRCxJQUFBRCxFQUFBUCxTQUFBWSxjQUFBLFVBSEMsT0FIQUwsRUFBZU8sVUFBVUMsSUFBSyxtQkFDOUJSLEVBQWU2QixhQUFjLGdCQUFpQixTQUM5QzdCLEVBQWU2QixhQUFjLGFBQWNXLHNCQUFzQkMsUUFDMUR6QyxFQWVOLFNBQUF1Qix3QkFBQW9CLEVBQUFDLEVBQUFuQixHQUhELElBQU1vQixFQUFvQkYsRUFBVWpELGlCQUFrQitCLEdBSXRELE9BQUEsRUFBT29CLEVBQVBqRCxRQUNBZ0QsSUFBQUMsRUFBQSxHQVVELFNBQVNuQix1QkFBd0JpQixFQUFXQyxFQUFTbkIsR0FFcEQsSUFBS29CLEVBQXFCRixFQUFVakQsaUJBQUErQixHQUNuQyxPQUFBLEVBQUFvQixFQUFtQkEsUUFDbkJELElBQUFDLEVBQUFBLEVBQUFqRCxPQUFBLEdBeFBGLFlBQUFILFNBQUFxRCxXQUlBckQsU0FBS3VCLGlCQUF1QjhCLG1CQUFhekQsZ0JBQXpDQSIsImZpbGUiOiJuYXZpZ2F0aW9uLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCB3cFJpZ1NjcmVlblJlYWRlclRleHQgKi9cbi8qKlxuICogRmlsZSBuYXZpZ2F0aW9uLmpzLlxuICpcbiAqIEhhbmRsZXMgdG9nZ2xpbmcgdGhlIG5hdmlnYXRpb24gbWVudSBmb3Igc21hbGwgc2NyZWVucyBhbmQgZW5hYmxlcyBUQUIga2V5XG4gKiBuYXZpZ2F0aW9uIHN1cHBvcnQgZm9yIGRyb3Bkb3duIG1lbnVzLlxuICovXG5cbmNvbnN0IEtFWU1BUCA9IHtcblx0VEFCOiA5LFxufTtcblxuaWYgKCAnbG9hZGluZycgPT09IGRvY3VtZW50LnJlYWR5U3RhdGUgKSB7XG5cdC8vIFRoZSBET00gaGFzIG5vdCB5ZXQgYmVlbiBsb2FkZWQuXG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdET01Db250ZW50TG9hZGVkJywgaW5pdE5hdmlnYXRpb24gKTtcbn0gZWxzZSB7XG5cdC8vIFRoZSBET00gaGFzIGFscmVhZHkgYmVlbiBsb2FkZWQuXG5cdGluaXROYXZpZ2F0aW9uKCk7XG59XG5cbi8vIEluaXRpYXRlIHRoZSBtZW51cyB3aGVuIHRoZSBET00gbG9hZHMuXG5mdW5jdGlvbiBpbml0TmF2aWdhdGlvbigpIHtcblx0aW5pdE5hdlRvZ2dsZVN1Ym1lbnVzKCk7XG5cdGluaXROYXZUb2dnbGVTbWFsbCgpO1xufVxuXG4vKipcbiAqIEluaXRpYXRlIHRoZSBzY3JpcHQgdG8gcHJvY2VzcyBhbGxcbiAqIG5hdmlnYXRpb24gbWVudXMgd2l0aCBzdWJtZW51IHRvZ2dsZSBlbmFibGVkLlxuICovXG5mdW5jdGlvbiBpbml0TmF2VG9nZ2xlU3VibWVudXMoKSB7XG5cdGNvbnN0IG5hdlRPR0dMRSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoICcubmF2LS10b2dnbGUtc3ViJyApO1xuXG5cdC8vIE5vIHBvaW50IGlmIG5vIG5hdnMuXG5cdGlmICggISBuYXZUT0dHTEUubGVuZ3RoICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGZvciAoIGxldCBpID0gMDsgaSA8IG5hdlRPR0dMRS5sZW5ndGg7IGkrKyApIHtcblx0XHRpbml0RWFjaE5hdlRvZ2dsZVN1Ym1lbnUoIG5hdlRPR0dMRVsgaSBdICk7XG5cdH1cbn1cblxuLyoqXG4gKiBJbml0aWF0ZSB0aGUgc2NyaXB0IHRvIHByb2Nlc3Mgc3VibWVudVxuICogbmF2aWdhdGlvbiB0b2dnbGUgZm9yIGEgc3BlY2lmaWMgbmF2aWdhdGlvbiBtZW51LlxuICogQHBhcmFtIHtPYmplY3R9IG5hdiBOYXZpZ2F0aW9uIGVsZW1lbnQuXG4gKi9cbmZ1bmN0aW9uIGluaXRFYWNoTmF2VG9nZ2xlU3VibWVudSggbmF2ICkge1xuXHQvLyBHZXQgdGhlIHN1Ym1lbnVzLlxuXHRjb25zdCBTVUJNRU5VUyA9IG5hdi5xdWVyeVNlbGVjdG9yQWxsKCAnLm1lbnUgdWwnICk7XG5cblx0Ly8gTm8gcG9pbnQgaWYgbm8gc3VibWVudXMuXG5cdGlmICggISBTVUJNRU5VUy5sZW5ndGggKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Ly8gQ3JlYXRlIHRoZSBkcm9wZG93biBidXR0b24uXG5cdGNvbnN0IGRyb3Bkb3duQnV0dG9uID0gZ2V0RHJvcGRvd25CdXR0b24oKTtcblxuXHRmb3IgKCBsZXQgaSA9IDA7IGkgPCBTVUJNRU5VUy5sZW5ndGg7IGkrKyApIHtcblx0XHRjb25zdCBwYXJlbnRNZW51SXRlbSA9IFNVQk1FTlVTWyBpIF0ucGFyZW50Tm9kZTtcblx0XHRsZXQgZHJvcGRvd24gPSBwYXJlbnRNZW51SXRlbS5xdWVyeVNlbGVjdG9yKCAnLmRyb3Bkb3duJyApO1xuXG5cdFx0Ly8gSWYgbm8gZHJvcGRvd24sIGNyZWF0ZSBvbmUuXG5cdFx0aWYgKCAhIGRyb3Bkb3duICkge1xuXHRcdFx0Ly8gQ3JlYXRlIGRyb3Bkb3duLlxuXHRcdFx0ZHJvcGRvd24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnc3BhbicgKTtcblx0XHRcdGRyb3Bkb3duLmNsYXNzTGlzdC5hZGQoICdkcm9wZG93bicgKTtcblxuXHRcdFx0Y29uc3QgZHJvcGRvd25TeW1ib2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnaScgKTtcblx0XHRcdGRyb3Bkb3duU3ltYm9sLmNsYXNzTGlzdC5hZGQoICdkcm9wZG93bi1zeW1ib2wnICk7XG5cdFx0XHRkcm9wZG93bi5hcHBlbmRDaGlsZCggZHJvcGRvd25TeW1ib2wgKTtcblxuXHRcdFx0Ly8gQWRkIGJlZm9yZSBzdWJtZW51LlxuXHRcdFx0U1VCTUVOVVNbIGkgXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZHJvcGRvd24sIFNVQk1FTlVTWyBpIF0gKTtcblx0XHR9XG5cblx0XHQvLyBDb252ZXJ0IGRyb3Bkb3duIHRvIGJ1dHRvbi5cblx0XHRjb25zdCB0aGlzRHJvcGRvd25CdXR0b24gPSBkcm9wZG93bkJ1dHRvbi5jbG9uZU5vZGUoIHRydWUgKTtcblxuXHRcdC8vIENvcHkgY29udGVudHMgb2YgZHJvcGRvd24gaW50byBidXR0b24uXG5cdFx0dGhpc0Ryb3Bkb3duQnV0dG9uLmlubmVySFRNTCA9IGRyb3Bkb3duLmlubmVySFRNTDtcblxuXHRcdC8vIFJlcGxhY2UgZHJvcGRvd24gd2l0aCB0b2dnbGUgYnV0dG9uLlxuXHRcdGRyb3Bkb3duLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKCB0aGlzRHJvcGRvd25CdXR0b24sIGRyb3Bkb3duICk7XG5cblx0XHQvLyBUb2dnbGUgdGhlIHN1Ym1lbnUgd2hlbiB3ZSBjbGljayB0aGUgZHJvcGRvd24gYnV0dG9uLlxuXHRcdHRoaXNEcm9wZG93bkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCAnY2xpY2snLCAoIGUgKSA9PiB7XG5cdFx0XHR0b2dnbGVTdWJNZW51KCBlLnRhcmdldC5wYXJlbnROb2RlICk7XG5cdFx0fSApO1xuXG5cdFx0Ly8gQ2xlYW4gdXAgdGhlIHRvZ2dsZSBpZiBhIG1vdXNlIHRha2VzIG92ZXIgZnJvbSBrZXlib2FyZC5cblx0XHRwYXJlbnRNZW51SXRlbS5hZGRFdmVudExpc3RlbmVyKCAnbW91c2VsZWF2ZScsICggZSApID0+IHtcblx0XHRcdHRvZ2dsZVN1Yk1lbnUoIGUudGFyZ2V0LCBmYWxzZSApO1xuXHRcdH0gKTtcblxuXHRcdC8vIFdoZW4gd2UgZm9jdXMgb24gYSBtZW51IGxpbmssIG1ha2Ugc3VyZSBhbGwgc2libGluZ3MgYXJlIGNsb3NlZC5cblx0XHRwYXJlbnRNZW51SXRlbS5xdWVyeVNlbGVjdG9yKCAnYScgKS5hZGRFdmVudExpc3RlbmVyKCAnZm9jdXMnLCAoIGUgKSA9PiB7XG5cdFx0XHRjb25zdCBwYXJlbnRNZW51SXRlbXNUb2dnbGVkID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoICdsaS5tZW51LWl0ZW0tLXRvZ2dsZWQtb24nICk7XG5cdFx0XHRmb3IgKCBsZXQgaiA9IDA7IGogPCBwYXJlbnRNZW51SXRlbXNUb2dnbGVkLmxlbmd0aDsgaisrICkge1xuXHRcdFx0XHR0b2dnbGVTdWJNZW51KCBwYXJlbnRNZW51SXRlbXNUb2dnbGVkWyBqIF0sIGZhbHNlICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXG5cdFx0Ly8gSGFuZGxlIGtleWJvYXJkIGFjY2Vzc2liaWxpdHkgZm9yIHRyYXZlcnNpbmcgbWVudS5cblx0XHRTVUJNRU5VU1sgaSBdLmFkZEV2ZW50TGlzdGVuZXIoICdrZXlkb3duJywgKCBlICkgPT4ge1xuXHRcdFx0Ly8gVGhlc2Ugc3BlY2lmaWMgc2VsZWN0b3JzIGhlbHAgdXMgb25seSBzZWxlY3QgaXRlbXMgdGhhdCBhcmUgdmlzaWJsZS5cblx0XHRcdGNvbnN0IGZvY3VzU2VsZWN0b3IgPSAndWwudG9nZ2xlLXNob3cgPiBsaSA+IGEsIHVsLnRvZ2dsZS1zaG93ID4gbGkgPiBidXR0b24nO1xuXG5cdFx0XHRpZiAoIEtFWU1BUC5UQUIgPT09IGUua2V5Q29kZSApIHtcblx0XHRcdFx0aWYgKCBlLnNoaWZ0S2V5ICkge1xuXHRcdFx0XHRcdC8vIE1lYW5zIHdlJ3JlIHRhYmJpbmcgb3V0IG9mIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHN1Ym1lbnUuXG5cdFx0XHRcdFx0aWYgKCBpc2ZpcnN0Rm9jdXNhYmxlRWxlbWVudCggZS50YXJnZXQsIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsIGZvY3VzU2VsZWN0b3IgKSApIHtcblx0XHRcdFx0XHRcdHRvZ2dsZVN1Yk1lbnUoIGUudGFyZ2V0LnBhcmVudE5vZGUsIGZhbHNlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vIE1lYW5zIHdlJ3JlIHRhYmJpbmcgb3V0IG9mIHRoZSBlbmQgb2YgdGhlIHN1Ym1lbnUuXG5cdFx0XHRcdH0gZWxzZSBpZiAoIGlzbGFzdEZvY3VzYWJsZUVsZW1lbnQoIGUudGFyZ2V0LCBkb2N1bWVudC5hY3RpdmVFbGVtZW50LCBmb2N1c1NlbGVjdG9yICkgKSB7XG5cdFx0XHRcdFx0dG9nZ2xlU3ViTWVudSggZS50YXJnZXQucGFyZW50Tm9kZSwgZmFsc2UgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gKTtcblxuXHRcdFNVQk1FTlVTWyBpIF0ucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCAnbWVudS1pdGVtLS1oYXMtdG9nZ2xlJyApO1xuXHR9XG59XG5cbi8qKlxuICogSW5pdGlhdGUgdGhlIHNjcmlwdCB0byBwcm9jZXNzIGFsbFxuICogbmF2aWdhdGlvbiBtZW51cyB3aXRoIHNtYWxsIHRvZ2dsZSBlbmFibGVkLlxuICovXG5mdW5jdGlvbiBpbml0TmF2VG9nZ2xlU21hbGwoKSB7XG5cdGNvbnN0IG5hdlRPR0dMRSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoICcubmF2LS10b2dnbGUtc21hbGwnICk7XG5cblx0Ly8gTm8gcG9pbnQgaWYgbm8gbmF2cy5cblx0aWYgKCAhIG5hdlRPR0dMRS5sZW5ndGggKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Zm9yICggbGV0IGkgPSAwOyBpIDwgbmF2VE9HR0xFLmxlbmd0aDsgaSsrICkge1xuXHRcdGluaXRFYWNoTmF2VG9nZ2xlU21hbGwoIG5hdlRPR0dMRVsgaSBdICk7XG5cdH1cbn1cblxuLyoqXG4gKiBJbml0aWF0ZSB0aGUgc2NyaXB0IHRvIHByb2Nlc3Mgc21hbGxcbiAqIG5hdmlnYXRpb24gdG9nZ2xlIGZvciBhIHNwZWNpZmljIG5hdmlnYXRpb24gbWVudS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBuYXYgTmF2aWdhdGlvbiBlbGVtZW50LlxuICovXG5mdW5jdGlvbiBpbml0RWFjaE5hdlRvZ2dsZVNtYWxsKCBuYXYgKSB7XG5cdGNvbnN0IG1lbnVUT0dHTEUgPSBuYXYucXVlcnlTZWxlY3RvciggJy5tZW51LXRvZ2dsZScgKTtcblxuXHQvLyBSZXR1cm4gZWFybHkgaWYgTUVOVVRPR0dMRSBpcyBtaXNzaW5nLlxuXHRpZiAoICEgbWVudVRPR0dMRSApIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHQvLyBBZGQgYW4gaW5pdGlhbCB2YWx1ZXMgZm9yIHRoZSBhdHRyaWJ1dGUuXG5cdG1lbnVUT0dHTEUuc2V0QXR0cmlidXRlKCAnYXJpYS1leHBhbmRlZCcsICdmYWxzZScgKTtcblxuXHRtZW51VE9HR0xFLmFkZEV2ZW50TGlzdGVuZXIoICdjbGljaycsICggZSApID0+IHtcblx0XHRuYXYuY2xhc3NMaXN0LnRvZ2dsZSggJ25hdi0tdG9nZ2xlZC1vbicgKTtcblx0XHRlLnRhcmdldC5zZXRBdHRyaWJ1dGUoICdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyA9PT0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKCAnYXJpYS1leHBhbmRlZCcgKSA/ICd0cnVlJyA6ICdmYWxzZScgKTtcblx0fSwgZmFsc2UgKTtcbn1cblxuLyoqXG4gKiBUb2dnbGUgc3VibWVudXMgb3BlbiBhbmQgY2xvc2VkLCBhbmQgdGVsbCBzY3JlZW4gcmVhZGVycyB3aGF0J3MgZ29pbmcgb24uXG4gKiBAcGFyYW0ge09iamVjdH0gcGFyZW50TWVudUl0ZW0gUGFyZW50IG1lbnUgZWxlbWVudC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gZm9yY2VUb2dnbGUgRm9yY2UgdGhlIG1lbnUgdG9nZ2xlLlxuICogQHJldHVybiB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gdG9nZ2xlU3ViTWVudSggcGFyZW50TWVudUl0ZW0sIGZvcmNlVG9nZ2xlICkge1xuXHRjb25zdCB0b2dnbGVCdXR0b24gPSBwYXJlbnRNZW51SXRlbS5xdWVyeVNlbGVjdG9yKCAnLmRyb3Bkb3duLXRvZ2dsZScgKSxcblx0XHRzdWJNZW51ID0gcGFyZW50TWVudUl0ZW0ucXVlcnlTZWxlY3RvciggJ3VsJyApO1xuXHRsZXQgcGFyZW50TWVudUl0ZW1Ub2dnbGVkID0gcGFyZW50TWVudUl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCAnbWVudS1pdGVtLS10b2dnbGVkLW9uJyApO1xuXG5cdC8vIFdpbGwgYmUgdHJ1ZSBpZiB3ZSB3YW50IHRvIGZvcmNlIHRoZSB0b2dnbGUgb24sIGZhbHNlIGlmIGZvcmNlIHRvZ2dsZSBjbG9zZS5cblx0aWYgKCB1bmRlZmluZWQgIT09IGZvcmNlVG9nZ2xlICYmICdib29sZWFuJyA9PT0gKCB0eXBlb2YgZm9yY2VUb2dnbGUgKSApIHtcblx0XHRwYXJlbnRNZW51SXRlbVRvZ2dsZWQgPSAhIGZvcmNlVG9nZ2xlO1xuXHR9XG5cblx0Ly8gVG9nZ2xlIGFyaWEtZXhwYW5kZWQgc3RhdHVzLlxuXHR0b2dnbGVCdXR0b24uc2V0QXR0cmlidXRlKCAnYXJpYS1leHBhbmRlZCcsICggISBwYXJlbnRNZW51SXRlbVRvZ2dsZWQgKS50b1N0cmluZygpICk7XG5cblx0Lypcblx0ICogU3RlcHMgdG8gaGFuZGxlIGR1cmluZyB0b2dnbGU6XG5cdCAqIC0gTGV0IHRoZSBwYXJlbnQgbWVudSBpdGVtIGtub3cgd2UncmUgdG9nZ2xlZCBvbi9vZmYuXG5cdCAqIC0gVG9nZ2xlIHRoZSBBUklBIGxhYmVsIHRvIGxldCBzY3JlZW4gcmVhZGVycyBrbm93IHdpbGwgZXhwYW5kIG9yIGNvbGxhcHNlLlxuXHQgKi9cblx0aWYgKCBwYXJlbnRNZW51SXRlbVRvZ2dsZWQgKSB7XG5cdFx0Ly8gVG9nZ2xlIFwib2ZmXCIgdGhlIHN1Ym1lbnUuXG5cdFx0cGFyZW50TWVudUl0ZW0uY2xhc3NMaXN0LnJlbW92ZSggJ21lbnUtaXRlbS0tdG9nZ2xlZC1vbicgKTtcblx0XHRzdWJNZW51LmNsYXNzTGlzdC5yZW1vdmUoICd0b2dnbGUtc2hvdycgKTtcblx0XHR0b2dnbGVCdXR0b24uc2V0QXR0cmlidXRlKCAnYXJpYS1sYWJlbCcsIHdwUmlnU2NyZWVuUmVhZGVyVGV4dC5leHBhbmQgKTtcblxuXHRcdC8vIE1ha2Ugc3VyZSBhbGwgY2hpbGRyZW4gYXJlIGNsb3NlZC5cblx0XHRjb25zdCBzdWJNZW51SXRlbXNUb2dnbGVkID0gcGFyZW50TWVudUl0ZW0ucXVlcnlTZWxlY3RvckFsbCggJy5tZW51LWl0ZW0tLXRvZ2dsZWQtb24nICk7XG5cdFx0Zm9yICggbGV0IGkgPSAwOyBpIDwgc3ViTWVudUl0ZW1zVG9nZ2xlZC5sZW5ndGg7IGkrKyApIHtcblx0XHRcdHRvZ2dsZVN1Yk1lbnUoIHN1Yk1lbnVJdGVtc1RvZ2dsZWRbIGkgXSwgZmFsc2UgKTtcblx0XHR9XG5cdH0gZWxzZSB7XG5cdFx0Ly8gTWFrZSBzdXJlIHNpYmxpbmdzIGFyZSBjbG9zZWQuXG5cdFx0Y29uc3QgcGFyZW50TWVudUl0ZW1zVG9nZ2xlZCA9IHBhcmVudE1lbnVJdGVtLnBhcmVudE5vZGUucXVlcnlTZWxlY3RvckFsbCggJ2xpLm1lbnUtaXRlbS0tdG9nZ2xlZC1vbicgKTtcblx0XHRmb3IgKCBsZXQgaSA9IDA7IGkgPCBwYXJlbnRNZW51SXRlbXNUb2dnbGVkLmxlbmd0aDsgaSsrICkge1xuXHRcdFx0dG9nZ2xlU3ViTWVudSggcGFyZW50TWVudUl0ZW1zVG9nZ2xlZFsgaSBdLCBmYWxzZSApO1xuXHRcdH1cblxuXHRcdC8vIFRvZ2dsZSBcIm9uXCIgdGhlIHN1Ym1lbnUuXG5cdFx0cGFyZW50TWVudUl0ZW0uY2xhc3NMaXN0LmFkZCggJ21lbnUtaXRlbS0tdG9nZ2xlZC1vbicgKTtcblx0XHRzdWJNZW51LmNsYXNzTGlzdC5hZGQoICd0b2dnbGUtc2hvdycgKTtcblx0XHR0b2dnbGVCdXR0b24uc2V0QXR0cmlidXRlKCAnYXJpYS1sYWJlbCcsIHdwUmlnU2NyZWVuUmVhZGVyVGV4dC5jb2xsYXBzZSApO1xuXHR9XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZHJvcGRvd24gYnV0dG9uXG4gKiBlbGVtZW50IG5lZWRlZCBmb3IgdGhlIG1lbnUuXG4gKiBAcmV0dXJuIHtPYmplY3R9IGRyb3AtZG93biBidXR0b24gZWxlbWVudFxuICovXG5mdW5jdGlvbiBnZXREcm9wZG93bkJ1dHRvbigpIHtcblx0Y29uc3QgZHJvcGRvd25CdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnYnV0dG9uJyApO1xuXHRkcm9wZG93bkJ1dHRvbi5jbGFzc0xpc3QuYWRkKCAnZHJvcGRvd24tdG9nZ2xlJyApO1xuXHRkcm9wZG93bkJ1dHRvbi5zZXRBdHRyaWJ1dGUoICdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyApO1xuXHRkcm9wZG93bkJ1dHRvbi5zZXRBdHRyaWJ1dGUoICdhcmlhLWxhYmVsJywgd3BSaWdTY3JlZW5SZWFkZXJUZXh0LmV4cGFuZCApO1xuXHRyZXR1cm4gZHJvcGRvd25CdXR0b247XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGVsZW1lbnQgaXMgdGhlXG4gKiBmaXJzdCBmb2N1c2FibGUgZWxlbWVudCBpbiB0aGUgY29udGFpbmVyLlxuICogQHBhcmFtIHtPYmplY3R9IGNvbnRhaW5lclxuICogQHBhcmFtIHtPYmplY3R9IGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb2N1c1NlbGVjdG9yXG4gKiBAcmV0dXJuIHtib29sZWFufSB3aGV0aGVyIG9yIG5vdCB0aGUgZWxlbWVudCBpcyB0aGUgZmlyc3QgZm9jdXNhYmxlIGVsZW1lbnQgaW4gdGhlIGNvbnRhaW5lclxuICovXG5mdW5jdGlvbiBpc2ZpcnN0Rm9jdXNhYmxlRWxlbWVudCggY29udGFpbmVyLCBlbGVtZW50LCBmb2N1c1NlbGVjdG9yICkge1xuXHRjb25zdCBmb2N1c2FibGVFbGVtZW50cyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCBmb2N1c1NlbGVjdG9yICk7XG5cdGlmICggMCA8IGZvY3VzYWJsZUVsZW1lbnRzLmxlbmd0aCApIHtcblx0XHRyZXR1cm4gZWxlbWVudCA9PT0gZm9jdXNhYmxlRWxlbWVudHNbIDAgXTtcblx0fVxuXHRyZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGVsZW1lbnQgaXMgdGhlXG4gKiBsYXN0IGZvY3VzYWJsZSBlbGVtZW50IGluIHRoZSBjb250YWluZXIuXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGFpbmVyXG4gKiBAcGFyYW0ge09iamVjdH0gZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IGZvY3VzU2VsZWN0b3JcbiAqIEByZXR1cm4ge2Jvb2xlYW59IHdoZXRoZXIgb3Igbm90IHRoZSBlbGVtZW50IGlzIHRoZSBsYXN0IGZvY3VzYWJsZSBlbGVtZW50IGluIHRoZSBjb250YWluZXJcbiAqL1xuZnVuY3Rpb24gaXNsYXN0Rm9jdXNhYmxlRWxlbWVudCggY29udGFpbmVyLCBlbGVtZW50LCBmb2N1c1NlbGVjdG9yICkge1xuXHRjb25zdCBmb2N1c2FibGVFbGVtZW50cyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCBmb2N1c1NlbGVjdG9yICk7XG5cdGlmICggMCA8IGZvY3VzYWJsZUVsZW1lbnRzLmxlbmd0aCApIHtcblx0XHRyZXR1cm4gZWxlbWVudCA9PT0gZm9jdXNhYmxlRWxlbWVudHNbIGZvY3VzYWJsZUVsZW1lbnRzLmxlbmd0aCAtIDEgXTtcblx0fVxuXHRyZXR1cm4gZmFsc2U7XG59XG4iXX0=